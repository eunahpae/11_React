<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">

        // âœ… í´ë˜ìŠ¤í˜• ì»´í¬ë„ŒíŠ¸ ì •ì˜
        class Greeting extends React.Component {
            // ğŸ”¸ ìƒì„±ì: ì»´í¬ë„ŒíŠ¸ ì¸ìŠ¤í„´ìŠ¤ê°€ ì²˜ìŒ ìƒì„±ë  ë•Œ í˜¸ì¶œë¨
            constructor(props) {
                super(props); // ë¶€ëª¨ í´ë˜ìŠ¤(React.Component)ì˜ ìƒì„±ì í˜¸ì¶œ
                console.log('constructor');

                // ğŸ”¸ state ì´ˆê¸°í™” (ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°)
                this.state = {
                    text: 'ì´ˆê¸°ê°’'
                };
            }

            // ğŸ”¸ getDerivedStateFromProps: props ë³€ê²½ì— ë”°ë¼ stateë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” ì •ì  ë©”ì„œë“œ
            // â€» render ì´ì „ì— í˜¸ì¶œë˜ë©°, í´ë˜ìŠ¤ ë©”ì„œë“œê°€ ì•„ë‹Œ staticìœ¼ë¡œ ì„ ì–¸í•´ì•¼ í•¨
            static getDerivedStateFromProps(props, state) {
                console.log('getDerivedStateFromProps');
                console.log('props:', props);
                console.log('state:', state);

                // props.text ê°’ì´ í˜„ì¬ state.textì™€ ë‹¤ë¥´ë©´ stateë¥¼ ì—…ë°ì´íŠ¸
                if (props.text !== state.text) {
                    return { text: props.text }; // ë°˜í™˜ëœ ê°ì²´ëŠ” ìƒˆë¡œìš´ stateë¡œ ë³‘í•©ë¨
                }
                return null; // ë°˜í™˜ê°’ì´ nullì´ë©´ state ë³€ê²½ ì—†ìŒ
            }

            // ğŸ”¸ render: í™”ë©´(UI)ì„ ì‹¤ì œë¡œ ê·¸ë¦¬ëŠ” ë©”ì„œë“œ (í•„ìˆ˜ êµ¬í˜„)
            render() {
                console.log('render');
                // this.setState({text:'ì£¼ì˜ì‚¬í•­ í…ŒìŠ¤íŠ¸'});
                // âŒ ì£¼ì˜: render() ë‚´ë¶€ì—ì„œëŠ” setState()ë¥¼ ì ˆëŒ€ í˜¸ì¶œí•˜ì§€ ë§ ê²ƒ!
                // ê·¸ ì´ìœ : setState â†’ render ì¬í˜¸ì¶œ â†’ ë‹¤ì‹œ setState â†’ ë¬´í•œ ë£¨í”„ ë°œìƒ

                return (
                    <>
                        <h1>í˜„ì¬ ìƒíƒœê°’: {this.state.text}</h1>
                    </>
                );
            }

            // ğŸ”¸ componentDidMount: ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ëœ ì§í›„(í™”ë©´ì— ë‚˜íƒ€ë‚œ ì§í›„) í•œ ë²ˆ í˜¸ì¶œë¨
            componentDidMount() {
                console.log('componentDidMount');

                // â›ï¸ ì—¬ê¸°ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—… ê°€ëŠ¥:
                // - ì™¸ë¶€ API í˜¸ì¶œ (fetch, axios ë“±)
                // - setTimeout, setInterval ë“±ë¡
                // - ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬(D3.js, Chart.js ë“±) ì´ˆê¸°í™”
                // - DOM ìš”ì†Œ ì§ì ‘ ì ‘ê·¼ í•„ìš”í•  ë•Œ
            }
        }

        // ğŸ”¸ Greeting ì»´í¬ë„ŒíŠ¸ ë Œë”ë§: propsë¡œ text="hello" ì „ë‹¬
        ReactDOM.createRoot(document.getElementById("root")).render(<Greeting text="hello" />);
    </script>

</body>

</html>