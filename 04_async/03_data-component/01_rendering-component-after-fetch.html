<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rendering-component-after-fetch</title>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Title ì»´í¬ë„ŒíŠ¸: ë‹¨ìˆœíˆ ì œëª©ë§Œ ë Œë”ë§
        function Title() {
            return (
                <>
                    <h1>íšŒì› ëª©ë¡</h1>
                </>
            )
        }

        // ItemList ì»´í¬ë„ŒíŠ¸: ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê³  ê° í•­ëª©ì„ Item ì»´í¬ë„ŒíŠ¸ë¡œ ë Œë”ë§
        function ItemList() {
            /*
             [ğŸ’¡ ìƒíƒœ ê´€ë¦¬ ìœ„ì¹˜ì— ëŒ€í•œ íŒë‹¨]
             - ì‚¬ìš©ì ëª©ë¡ì€ ItemListì—ì„œë§Œ í•„ìš”í•˜ë¯€ë¡œ, ì—¬ê¸°ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤.
             - Appì—ì„œ ìƒíƒœë¥¼ ì˜¬ë ¤ propsë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆì§€ë§Œ, 
               ê·¸ ê²½ìš° ë¶ˆí•„ìš”í•œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ ë¦¬ë Œë”ë§ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
            */
            const [users, setUsers] = useState([]);

            /*
             [ğŸ’¡ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°: useEffect ì‚¬ìš©]
             - ì»´í¬ë„ŒíŠ¸ê°€ ì²˜ìŒ ë§ˆìš´íŠ¸ë  ë•Œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ useEffect ì‚¬ìš©
             - ì˜ì¡´ì„± ë°°ì—´ì„ ë¹ˆ ë°°ì—´([])ë¡œ ì„¤ì •í•˜ì—¬ 'í•œ ë²ˆë§Œ' ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •
             - ì´ëŠ” classí˜• ì»´í¬ë„ŒíŠ¸ì˜ componentDidMount ì—­í• ê³¼ ìœ ì‚¬í•˜ë‹¤.
            */
            useEffect(() => {
                fetch('https://jsonplaceholder.typicode.com/users') // API í˜¸ì¶œ
                    .then(response => response.json()) // JSON ë³€í™˜
                    .then(responseUsers => setUsers(responseUsers)); // ìƒíƒœ ì—…ë°ì´íŠ¸
            }, []);

            console.log('users : ', users); // ìƒíƒœ í™•ì¸ìš© ë””ë²„ê¹… ë¡œê·¸

            /* 
                usersì˜ ì´ˆê¸°ê°’ì„ ë¹ˆ ë°°ì—´([])ë¡œ ì„¤ì •í–ˆê¸° ë•Œë¬¸ì— map í˜¸ì¶œ ì‹œ ì˜¤ë¥˜ëŠ” ë°œìƒí•˜ì§€ ì•Šì§€ë§Œ, 
                ë§Œì•½ ì´ˆê¸°ê°’ì´ null ë˜ëŠ” undefinedì¸ ê²½ìš°ì—ëŠ” map í•¨ìˆ˜ í˜¸ì¶œ ì‹œ TypeErrorê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. 
                ì´ëŸ¬í•œ ìƒí™©ì— ëŒ€ë¹„í•´ ì¡°ê±´ë¶€ ë Œë”ë§ (users && users.map(...))ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ë‹¤.
                ('users &&' ì¶”ê°€ë¡œ users ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ë§Œ ë Œë”ë§)
            */
            return (
                <div>
                    {/* ì‚¬ìš©ì ë°°ì—´ì„ ìˆœíšŒí•˜ë©° Item ì»´í¬ë„ŒíŠ¸ë¡œ ê°ê° ë Œë”ë§ */}
                    {users && users.map(user => (
                        <Item key={user.id} user={user} />
                    ))}
                </div>
            )
        }

        // Item ì»´í¬ë„ŒíŠ¸: ë‹¨ì¼ ì‚¬ìš©ì ì •ë³´ë¥¼ í‘œì‹œ
        function Item({ user }) {
            return (
                <div>
                    <h3>{user.name}</h3>
                    userId : {user.id}<br />
                    email : {user.email}<br />
                    phone : {user.phone}<br />
                    compane name : {user.company.name}
                    <hr />
                </div>
            )
        }

        function App() {
            return (
                <>
                    <Title />
                    <ItemList />
                </>
            )
        }

        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>

</body>

</html>